<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>RMS Titanic â€” Survival Predictor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=DM+Mono:wght@400;500&display=swap"
        rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        :root {
            --bg: #07090d;
            --s2: #131a22;
            --s3: #1a2433;
            --bd: rgba(255, 255, 255, .07);
            --bd2: rgba(255, 255, 255, .13);
            --txt: #dce6f0;
            --mt: #7d95ab;
            --mt2: #a0b5c5;
            --gold: #c89020;
            --gold2: #e8b040;
            --teal: #1fc8a8;
            --teal2: #4ddcc0;
            --red: #d94040;
            --red2: #f06060;
            --fd: 'Playfair Display', serif;
            --fb: 'Cormorant Garamond', serif;
            --fm: 'DM Mono', monospace;
            --sh: 0 8px 40px rgba(0, 0, 0, .6);
        }

        html {
            scroll-behavior: smooth
        }

        body {
            font-family: var(--fb);
            background: var(--bg);
            color: var(--txt);
            min-height: 100vh;
            overflow-x: hidden
        }

        #ocean {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none
        }

        /* HERO */
        .hero {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 4rem 2rem 5rem
        }

        .ship {
            width: clamp(180px, 35vw, 280px);
            animation: float 5s ease-in-out infinite;
            filter: drop-shadow(0 6px 28px rgba(180, 210, 255, .35)) drop-shadow(0 0 50px rgba(200, 220, 255, .15))
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(-1deg)
            }

            50% {
                transform: translateY(-10px) rotate(1.2deg)
            }
        }

        .eyebrow {
            font-family: var(--fm);
            font-size: .72rem;
            letter-spacing: .22em;
            text-transform: uppercase;
            color: var(--gold);
            margin: .9rem 0 .5rem;
            opacity: 0;
            animation: up .6s .3s ease forwards
        }

        .h1 {
            font-family: var(--fd);
            font-size: clamp(2.6rem, 6.5vw, 5rem);
            line-height: 1.08;
            letter-spacing: -.02em;
            opacity: 0;
            animation: up .7s .5s ease forwards
        }

        .h1 em {
            font-style: italic;
            color: var(--gold2)
        }

        .sub {
            font-family: var(--fb);
            font-style: italic;
            font-weight: 300;
            font-size: clamp(.95rem, 2vw, 1.2rem);
            color: var(--mt2);
            max-width: 480px;
            margin: .9rem 0 2.5rem;
            opacity: 0;
            animation: up .7s .7s ease forwards
        }

        .scue {
            font-family: var(--fm);
            font-size: .65rem;
            letter-spacing: .15em;
            text-transform: uppercase;
            color: var(--mt);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: .4rem;
            opacity: 0;
            animation: up .6s 1.1s ease forwards
        }

        .sarrow {
            width: 18px;
            height: 18px;
            border-right: 1.5px solid var(--mt);
            border-bottom: 1.5px solid var(--mt);
            transform: rotate(45deg);
            animation: bounce 1.8s ease-in-out infinite
        }

        @keyframes bounce {

            0%,
            100% {
                transform: rotate(45deg) translateY(-4px)
            }

            50% {
                transform: rotate(45deg) translateY(5px)
            }
        }

        .hwave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100px;
            overflow: hidden
        }

        .hwave svg {
            width: 100%;
            height: 100%
        }

        @keyframes up {
            from {
                opacity: 0;
                transform: translateY(16px)
            }

            to {
                opacity: 1;
                transform: none
            }
        }

        /* DASH */
        .dash {
            position: relative;
            z-index: 1;
            max-width: 1360px;
            margin: 0 auto;
            padding: 0 1.5rem 6rem;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 1.75rem
        }

        @media(max-width:1020px) {
            .dash {
                grid-template-columns: 1fr
            }
        }

        .stag {
            grid-column: 1/-1;
            font-family: var(--fm);
            font-size: .65rem;
            letter-spacing: .18em;
            text-transform: uppercase;
            color: var(--mt);
            padding-bottom: .7rem;
            border-bottom: 1px solid var(--bd);
            display: flex;
            align-items: center;
            gap: .7rem;
            margin-top: .5rem
        }

        .stag::before {
            content: '//';
            color: var(--gold);
            font-size: .85rem
        }

        /* CARD */
        .card {
            background: rgba(13, 17, 23, .78);
            border: 1px solid var(--bd);
            border-radius: 14px;
            padding: 1.6rem;
            backdrop-filter: blur(18px);
            box-shadow: var(--sh);
            transition: border-color .2s
        }

        .card:hover {
            border-color: var(--bd2)
        }

        .ch {
            font-family: var(--fm);
            font-size: .62rem;
            letter-spacing: .14em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 1.3rem;
            display: flex;
            align-items: center;
            gap: .5rem
        }

        .ch::before {
            content: '';
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: var(--gold);
            box-shadow: 0 0 6px var(--gold)
        }

        /* TABS */
        .mtabs {
            display: flex;
            gap: .45rem;
            flex-wrap: wrap;
            margin-bottom: 1.6rem
        }

        .mtab {
            font-family: var(--fb);
            font-size: .88rem;
            font-weight: 500;
            padding: .45rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--bd2);
            background: transparent;
            color: var(--mt2);
            cursor: pointer;
            transition: all .18s
        }

        .mtab:hover {
            border-color: var(--gold);
            color: var(--gold)
        }

        .mtab.active {
            background: rgba(200, 144, 32, .12);
            border-color: var(--gold);
            color: var(--gold2)
        }

        /* FIELDS */
        .fgrid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(155px, 1fr));
            gap: .65rem
        }

        .field label {
            display: block;
            font-size: .74rem;
            font-weight: 500;
            color: var(--mt2);
            margin-bottom: .28rem
        }

        .field select,
        .field input {
            width: 100%;
            background: rgba(26, 36, 51, .8);
            border: 1px solid var(--bd2);
            color: var(--txt);
            font-family: var(--fm);
            font-size: .8rem;
            padding: .46rem .72rem;
            border-radius: 7px;
            outline: none;
            transition: border-color .15s, box-shadow .15s;
        }

        .field select option {
            background: #0d1117;
            color: var(--txt)
        }

        .field input:focus,
        .field select:focus {
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(200, 144, 32, .11)
        }

        .field input.err,
        .field select.err {
            border-color: var(--red)
        }

        .emsg {
            font-size: .66rem;
            color: var(--red);
            margin-top: .22rem;
            display: block
        }

        /* BUTTONS */
        .acts {
            display: flex;
            gap: .7rem;
            margin-top: 1.6rem;
            flex-wrap: wrap
        }

        .btn {
            font-family: var(--fb);
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            padding: .6rem 1.4rem;
            cursor: pointer;
            transition: all .18s;
            display: inline-flex;
            align-items: center;
            gap: .45rem
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--gold), var(--gold2));
            color: #07090d;
            flex: 1;
            justify-content: center;
            font-weight: 700;
            box-shadow: 0 4px 18px rgba(200, 144, 32, .28)
        }

        .btn-gold:hover:not(:disabled) {
            box-shadow: 0 6px 26px rgba(200, 144, 32, .48);
            transform: translateY(-1px)
        }

        .btn-gold:disabled {
            opacity: .45;
            cursor: not-allowed
        }

        .btn-ghost {
            background: rgba(26, 36, 51, .8);
            color: var(--mt2);
            border: 1px solid var(--bd2)
        }

        .btn-ghost:hover {
            color: var(--txt)
        }

        .spin {
            width: 15px;
            height: 15px;
            border: 2px solid rgba(7, 9, 13, .4);
            border-top-color: #07090d;
            border-radius: 50%;
            animation: rot .5s linear infinite
        }

        @keyframes rot {
            to {
                transform: rotate(360deg)
            }
        }

        /* RIGHT COL */
        .rcol {
            display: flex;
            flex-direction: column;
            gap: 1.4rem
        }

        .rcard {
            border-radius: 14px;
            padding: 1.6rem;
            border: 1px solid var(--bd);
            background: rgba(13, 17, 23, .8);
            backdrop-filter: blur(18px);
            box-shadow: var(--sh);
            position: relative;
            overflow: hidden
        }

        .rcard.survived {
            border-color: rgba(31, 200, 168, .32)
        }

        .rcard.perished {
            border-color: rgba(217, 64, 64, .32)
        }

        .rglow {
            position: absolute;
            top: -80px;
            right: -80px;
            width: 220px;
            height: 220px;
            border-radius: 50%;
            filter: blur(65px);
            opacity: .12;
            pointer-events: none
        }

        .survived .rglow {
            background: var(--teal)
        }

        .perished .rglow {
            background: var(--red)
        }

        .rico {
            font-size: 2.2rem;
            margin-bottom: .4rem
        }

        .rlabel {
            font-family: var(--fd);
            font-size: 2rem;
            font-style: italic;
            line-height: 1.1;
            margin-bottom: .55rem
        }

        .survived .rlabel {
            color: var(--teal2)
        }

        .perished .rlabel {
            color: var(--red2)
        }

        .rtags {
            display: flex;
            flex-wrap: wrap;
            gap: .4rem;
            margin-bottom: .9rem
        }

        .rtag {
            font-family: var(--fm);
            font-size: .67rem;
            padding: .2rem .6rem;
            border-radius: 999px;
            background: rgba(26, 36, 51, .8);
            border: 1px solid var(--bd2);
            color: var(--mt2)
        }

        .ctrack {
            height: 4px;
            background: rgba(26, 36, 51, .8);
            border-radius: 99px;
            overflow: hidden
        }

        .cfill {
            height: 100%;
            border-radius: 99px;
            transition: width .9s cubic-bezier(.22, .68, 0, 1.2)
        }

        .survived .cfill {
            background: var(--teal)
        }

        .perished .cfill {
            background: var(--red)
        }

        .empty {
            text-align: center;
            padding: 2rem 1rem
        }

        .eico {
            font-size: 2.6rem;
            opacity: .3;
            margin-bottom: .6rem
        }

        .empty p {
            color: var(--mt);
            font-style: italic;
            font-size: .88rem
        }

        /* STATS */
        .sgrid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: .6rem
        }

        .sbox {
            background: rgba(26, 36, 51, .6);
            border: 1px solid var(--bd);
            border-radius: 8px;
            padding: .85rem .7rem;
            text-align: center
        }

        .sval {
            font-family: var(--fm);
            font-size: 1.25rem;
            font-weight: 500;
            color: var(--gold2)
        }

        .slbl {
            font-size: .64rem;
            color: var(--mt);
            margin-top: .18rem;
            text-transform: uppercase;
            letter-spacing: .07em
        }

        /* CM */
        .cmgrid {
            display: grid;
            grid-template-columns: auto 1fr 1fr;
            gap: 4px;
            margin-top: .5rem
        }

        .cmch,
        .cmrh {
            font-family: var(--fm);
            font-size: .6rem;
            color: var(--mt);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: .28rem;
            text-align: center
        }

        .cmrh {
            writing-mode: vertical-lr;
            transform: rotate(180deg)
        }

        .cmcell {
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: .9rem .4rem;
            transition: transform .15s, filter .15s;
            cursor: default
        }

        .cmcell:hover {
            transform: scale(1.04);
            filter: brightness(1.2)
        }

        .cmv {
            font-family: var(--fm);
            font-size: 1.5rem;
            font-weight: 500
        }

        .cml {
            font-size: .58rem;
            color: rgba(255, 255, 255, .5);
            margin-top: .15rem;
            text-align: center
        }

        /* CHARTS */
        .crow {
            grid-column: 1/-1;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.4rem
        }

        @media(max-width:880px) {
            .crow {
                grid-template-columns: 1fr
            }
        }

        .crow2 {
            grid-column: 1/-1;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.4rem
        }

        @media(max-width:880px) {
            .crow2 {
                grid-template-columns: 1fr
            }
        }

        .cwrap {
            position: relative;
            height: 240px
        }

        .cwrapt {
            position: relative;
            height: 270px
        }

        .hdiv {
            grid-column: 1/-1;
            height: 1px;
            background: linear-gradient(90deg, rgba(200, 144, 32, .3), transparent);
            margin: .5rem 0
        }

        .footer {
            grid-column: 1/-1;
            text-align: center;
            font-family: var(--fd);
            font-style: italic;
            font-size: 1rem;
            color: var(--mt);
            padding: 2rem 0 1rem;
            border-top: 1px solid var(--bd);
            margin-top: 1.5rem;
            opacity: .55
        }

        /* TOAST */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            font-family: var(--fm);
            font-size: .82rem;
            padding: .7rem 1.15rem;
            border-radius: 8px;
            z-index: 9999;
            box-shadow: var(--sh);
            display: none;
            max-width: 340px;
            animation: up .25s ease
        }

        .toast.err {
            background: #180808;
            border: 1px solid var(--red);
            color: var(--red2)
        }

        .toast.info {
            background: #081510;
            border: 1px solid var(--teal);
            color: var(--teal2)
        }

        .rv {
            animation: up .4s ease both
        }

        ::-webkit-scrollbar {
            width: 5px
        }

        ::-webkit-scrollbar-track {
            background: var(--bg)
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bd2);
            border-radius: 99px
        }
    </style>
</head>

<body>

    <canvas id="ocean"></canvas>

    <div style="position:relative;z-index:1">

        <section class="hero">
            <div class="ship">
                <svg viewBox="0 0 220 130" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Smoke from funnels -->
                    <ellipse cx="94" cy="18" rx="6" ry="9" fill="rgba(255,255,255,.22)" />
                    <ellipse cx="94" cy="11" rx="4" ry="6" fill="rgba(255,255,255,.13)" />
                    <ellipse cx="118" cy="16" rx="6" ry="9" fill="rgba(255,255,255,.22)" />
                    <ellipse cx="118" cy="10" rx="4" ry="6" fill="rgba(255,255,255,.13)" />
                    <!-- Funnels -->
                    <rect x="88" y="28" width="12" height="22" rx="2" fill="url(#fn1)" />
                    <rect x="112" y="30" width="11" height="20" rx="2" fill="url(#fn1)" />
                    <!-- Funnel tops (black band) -->
                    <rect x="88" y="28" width="12" height="5" rx="1" fill="#2a1a08" />
                    <rect x="112" y="30" width="11" height="5" rx="1" fill="#2a1a08" />
                    <!-- Mast line -->
                    <line x1="106" y1="10" x2="106" y2="48" stroke="url(#mast)" stroke-width="1.8" />
                    <!-- Crow's nest -->
                    <rect x="102" y="8" width="8" height="5" rx="1" fill="#fff8e0" opacity=".9" />
                    <!-- Upper deck / bridge -->
                    <rect x="72" y="48" width="76" height="14" rx="3" fill="url(#deck)" />
                    <!-- Bridge windows -->
                    <rect x="78" y="52" width="6" height="5" rx="1" fill="rgba(255,245,180,.9)" />
                    <rect x="88" y="52" width="6" height="5" rx="1" fill="rgba(255,245,180,.9)" />
                    <rect x="98" y="52" width="6" height="5" rx="1" fill="rgba(255,245,180,.9)" />
                    <rect x="108" y="52" width="6" height="5" rx="1" fill="rgba(255,245,180,.9)" />
                    <rect x="118" y="52" width="6" height="5" rx="1" fill="rgba(255,245,180,.9)" />
                    <rect x="132" y="52" width="6" height="5" rx="1" fill="rgba(255,245,180,.7)" />
                    <!-- Main hull upper -->
                    <rect x="40" y="62" width="140" height="28" rx="4" fill="url(#hull)" />
                    <!-- Porthole row -->
                    <circle cx="58" cy="76" r="4" fill="rgba(255,245,180,.95)" stroke="#fff8d0" stroke-width="1" />
                    <circle cx="74" cy="76" r="4" fill="rgba(255,245,180,.95)" stroke="#fff8d0" stroke-width="1" />
                    <circle cx="90" cy="76" r="4" fill="rgba(255,245,180,.95)" stroke="#fff8d0" stroke-width="1" />
                    <circle cx="106" cy="76" r="4" fill="rgba(255,245,180,.95)" stroke="#fff8d0" stroke-width="1" />
                    <circle cx="122" cy="76" r="4" fill="rgba(255,245,180,.95)" stroke="#fff8d0" stroke-width="1" />
                    <circle cx="138" cy="76" r="4" fill="rgba(255,245,180,.95)" stroke="#fff8d0" stroke-width="1" />
                    <circle cx="154" cy="76" r="4" fill="rgba(255,245,180,.8)" stroke="#fff8d0" stroke-width="1" />
                    <!-- Hull bottom -->
                    <path d="M36 90 Q110 115 184 90 L180 105 Q110 122 40 105 Z" fill="url(#keel)" />
                    <!-- Gold waterline stripe -->
                    <path d="M38 90 Q110 113 182 90" stroke="url(#stripe)" stroke-width="2.8" fill="none" />
                    <!-- Anchor chain hint -->
                    <path d="M52 62 L46 72" stroke="rgba(255,230,150,.6)" stroke-width="1.5" stroke-dasharray="2,2" />
                    <!-- Flag on mast -->
                    <path d="M106 10 L122 14 L106 19 Z" fill="#ffe066" opacity=".95" />
                    <!-- Defs -->
                    <defs>
                        <linearGradient id="fn1" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#ffe08a" />
                            <stop offset="100%" stop-color="#c89020" />
                        </linearGradient>
                        <linearGradient id="deck" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#f0f4ff" />
                            <stop offset="100%" stop-color="#c8d4e8" />
                        </linearGradient>
                        <linearGradient id="hull" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#e8eef8" />
                            <stop offset="100%" stop-color="#b8c8dc" />
                        </linearGradient>
                        <linearGradient id="keel" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#2a3a50" />
                            <stop offset="100%" stop-color="#141e2a" />
                        </linearGradient>
                        <linearGradient id="stripe" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="rgba(255,210,60,0)" />
                            <stop offset="20%" stop-color="#ffd03c" />
                            <stop offset="80%" stop-color="#ffe566" />
                            <stop offset="100%" stop-color="rgba(255,210,60,0)" />
                        </linearGradient>
                        <linearGradient id="mast" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="rgba(255,240,180,1)" />
                            <stop offset="100%" stop-color="rgba(255,240,180,.3)" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div class="eyebrow">RMS Titanic Â· April 15, 1912</div>
            <h1 class="h1">Who <em>Survives</em><br>the Deep?</h1>
            <p class="sub">Three machine-learning models predict survival based on passenger data â€” Logistic Regression,
                KNN, and Decision Tree.</p>
            <div class="scue"><span>Enter your passenger</span>
                <div class="sarrow"></div>
            </div>
            <div class="hwave">
                <svg viewBox="0 0 1440 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0,50 C360,100 720,0 1080,50 C1260,75 1380,30 1440,50 L1440,100 L0,100 Z"
                        fill="rgba(7,9,13,.7)" />
                    <path d="M0,70 C480,20 960,90 1440,60 L1440,100 L0,100 Z" fill="rgba(7,9,13,.95)" />
                </svg>
            </div>
        </section>

        <div class="dash">
            <div class="stag">Passenger Input & Prediction</div>

            <!-- FORM -->
            <div>
                <div class="card">
                    <div class="ch">Select ML Model</div>
                    <div class="mtabs" id="modelTabs">
                        <button class="mtab active" data-key="logistic">Logistic Regression</button>
                        <button class="mtab" data-key="knn">K-Nearest Neighbors</button>
                        <button class="mtab" data-key="decision_tree">Decision Tree</button>
                    </div>

                    <div class="ch">Passenger Details</div>
                    <div class="fgrid">

                        <!-- f0: pclass -->
                        <div class="field">
                            <label>Passenger Class</label>
                            <select id="f0">
                                <option value="1">1st Class</option>
                                <option value="2">2nd Class</option>
                                <option value="3" selected>3rd Class</option>
                            </select>
                        </div>

                        <!-- f1: sex -->
                        <div class="field">
                            <label>Sex</label>
                            <select id="f1">
                                <option value="1">Male</option>
                                <option value="0">Female</option>
                            </select>
                        </div>

                        <!-- f2: age -->
                        <div class="field">
                            <label>Age (years)</label>
                            <input id="f2" type="number" min="1" max="80" value="29" placeholder="29" />
                        </div>

                        <!-- f3: sibsp -->
                        <div class="field">
                            <label>Siblings / Spouses</label>
                            <input id="f3" type="number" min="0" max="8" value="0" placeholder="0" />
                        </div>

                        <!-- f4: parch -->
                        <div class="field">
                            <label>Parents / Children</label>
                            <input id="f4" type="number" min="0" max="6" value="0" placeholder="0" />
                        </div>

                        <!-- f5: fare -->
                        <div class="field">
                            <label>Ticket Fare (Â£)</label>
                            <input id="f5" type="number" min="1" max="512" value="32" placeholder="32" />
                        </div>

                        <!-- f6: embarked -->
                        <div class="field">
                            <label>Port of Embarkation</label>
                            <select id="f6">
                                <option value="0">Cherbourg (C)</option>
                                <option value="1">Queenstown (Q)</option>
                                <option value="2" selected>Southampton (S)</option>
                            </select>
                        </div>

                        <!-- f7: alone -->
                        <div class="field">
                            <label>Travelling Alone?</label>
                            <select id="f7">
                                <option value="1">Yes â€” Alone</option>
                                <option value="0" selected>No â€” With Family</option>
                            </select>
                        </div>

                    </div>

                    <div class="acts">
                        <button class="btn btn-ghost" id="sampleBtn">âš“ Notable Passenger</button>
                        <button class="btn btn-gold" id="predictBtn">
                            <span id="btnTxt">Predict Fate</span>
                            <span id="btnSpin" class="spin" style="display:none"></span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- RIGHT -->
            <div class="rcol">

                <div id="resultArea">
                    <div class="card">
                        <div class="ch">Prediction</div>
                        <div class="empty">
                            <div class="eico">âš“</div>
                            <p>Fill in the passenger details<br />and click <em>Predict Fate</em></p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="ch">Model Accuracy</div>
                    <div class="sgrid">
                        <div class="sbox">
                            <div class="sval" id="sTrain">â€”</div>
                            <div class="slbl">Train</div>
                        </div>
                        <div class="sbox">
                            <div class="sval" id="sTest">â€”</div>
                            <div class="slbl">Test</div>
                        </div>
                        <div class="sbox">
                            <div class="sval" id="sAuc">â€”</div>
                            <div class="slbl">AUC</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="ch">Confusion Matrix</div>
                    <div id="cmArea">
                        <p style="color:var(--mt);font-style:italic;font-size:.86rem">Loadingâ€¦</p>
                    </div>
                </div>

            </div>

            <div class="hdiv"></div>
            <div class="stag">Model Visualisations</div>

            <div class="crow">
                <div class="card">
                    <div class="ch">ROC Curve</div>
                    <div class="cwrap"><canvas id="rocChart"></canvas></div>
                </div>
                <div class="card">
                    <div class="ch">Accuracy Comparison</div>
                    <div class="cwrap"><canvas id="accChart"></canvas></div>
                </div>
                <div class="card">
                    <div class="ch">Feature Importance (DT)</div>
                    <div class="cwrap"><canvas id="featChart"></canvas></div>
                </div>
            </div>

            <div class="crow2" style="margin-top:0">
                <div class="card">
                    <div class="ch">KNN â€” Accuracy vs K (1â€“20)</div>
                    <div class="cwrapt"><canvas id="knnChart"></canvas></div>
                </div>
                <div class="card">
                    <div class="ch">All Models ROC Overlay</div>
                    <div class="cwrapt"><canvas id="rocAllChart"></canvas></div>
                </div>
            </div>

            <p class="footer">"She was called unsinkable, and ice was the last thing on anyone's mind."</p>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        /* OCEAN */
        (function () {
            const cv = document.getElementById('ocean'), cx = cv.getContext('2d');
            let W, H, t = 0;
            function resize() { W = cv.width = innerWidth; H = cv.height = innerHeight }
            resize(); addEventListener('resize', resize);
            const stars = Array.from({ length: 200 }, () => ({ x: Math.random(), y: Math.random() * .52, r: Math.random() * 1.3 + .3, a: Math.random(), sp: Math.random() * .003 + .001 }));
            const ibs = Array.from({ length: 5 }, (_, i) => ({ x: (i + .5) / 5 + (Math.random() - .5) * .12, by: .82 + Math.random() * .1, w: 55 + Math.random() * 85, dr: (Math.random() - .5) * .00008 }));
            function draw() {
                t += .007;
                const sky = cx.createLinearGradient(0, 0, 0, H);
                sky.addColorStop(0, '#010408'); sky.addColorStop(.5, '#040d16'); sky.addColorStop(.75, '#051422'); sky.addColorStop(1, '#030b12');
                cx.fillStyle = sky; cx.fillRect(0, 0, W, H);
                stars.forEach(s => { s.a += s.sp; const al = (.35 + .28 * Math.sin(s.a)) * .75; cx.beginPath(); cx.arc(s.x * W, s.y * H, s.r, 0, Math.PI * 2); cx.fillStyle = `rgba(255,245,215,${al})`; cx.fill() });
                const mx = W * .8, my = H * .1;
                const mg = cx.createRadialGradient(mx, my, 4, mx, my, 80); mg.addColorStop(0, 'rgba(235,190,80,.18)'); mg.addColorStop(1, 'rgba(235,190,80,0)');
                cx.fillStyle = mg; cx.beginPath(); cx.arc(mx, my, 80, 0, Math.PI * 2); cx.fill();
                cx.beginPath(); cx.arc(mx, my, 26, 0, Math.PI * 2); cx.fillStyle = 'rgba(248,228,148,.9)'; cx.fill();
                const oy = H * .76;
                for (let l = 0; l < 4; l++) { const amp = 7 - l * 1.3, fr = .0055 + l * .002, sp = .35 + l * .14, y = oy + l * 15; cx.beginPath(); cx.moveTo(0, y); for (let x = 0; x <= W; x += 3)cx.lineTo(x, y + Math.sin(x * fr + t * sp) * amp + Math.sin(x * fr * .6 + t * sp * .7) * amp * .45); cx.lineTo(W, H); cx.lineTo(0, H); cx.closePath(); cx.fillStyle = `rgba(4,22,40,${.07 + l * .05})`; cx.fill() }
                for (let i = 0; i < 6; i++) { const ry = oy + i * 26 + Math.sin(t * .5 + i) * 5; cx.beginPath(); cx.ellipse(mx + Math.sin(t * .35 + i) * 10, ry, 16 - i * 1.5, 2.2, 0, 0, Math.PI * 2); cx.fillStyle = `rgba(235,190,80,${.05 - i * .007})`; cx.fill() }
                ibs.forEach(ib => { ib.x += ib.dr; if (ib.x < -.1) ib.x = 1.1; if (ib.x > 1.1) ib.x = -.1; const x = ib.x * W, y = ib.by * H, w = ib.w; cx.beginPath(); cx.moveTo(x - w * .5, y); cx.lineTo(x - w * .28, y - w * .42); cx.lineTo(x + w * .08, y - w * .58); cx.lineTo(x + w * .38, y - w * .32); cx.lineTo(x + w * .5, y); cx.closePath(); cx.fillStyle = 'rgba(190,220,255,.07)'; cx.fill(); cx.strokeStyle = 'rgba(190,220,255,.13)'; cx.lineWidth = 1; cx.stroke() });
                requestAnimationFrame(draw);
            }
            draw();
        })();

        /* APP */
        // Auto-detects: localhost in dev, your Render domain in production
        const API = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:5000'
            : window.location.origin;
        const MODEL_LABELS = { logistic: 'Logistic Regression', knn: 'K-Nearest Neighbors', decision_tree: 'Decision Tree' };

        // 8 features: pclass, sex, age, sibsp, parch, fare, embarked, alone
        const SAMPLES = [
            { label: 'Jack (3rd, male, 20, alone)', v: [3, 1, 20, 0, 0, 8, 2, 1] },
            { label: 'Rose (1st, female, 17, family)', v: [1, 0, 17, 0, 1, 512, 0, 0] },
            { label: 'Officer (1st, male, 38, alone)', v: [1, 1, 38, 0, 0, 135, 2, 1] },
            { label: 'Child (2nd, female, 6, family)', v: [2, 0, 6, 2, 1, 26, 2, 0] },
            { label: 'Elderly (3rd, male, 65, alone)', v: [3, 1, 65, 0, 0, 10, 2, 1] },
        ];
        let sIdx = 0, selModel = 'logistic', mcache = null, charts = {};

        /* TABS */
        document.getElementById('modelTabs').addEventListener('click', async e => {
            const tab = e.target.closest('.mtab'); if (!tab) return;
            selModel = tab.dataset.key;
            document.querySelectorAll('.mtab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            if (mcache) updateStats(selModel);
            renderCM(selModel); renderROC(selModel);
        });

        /* SAMPLE */
        document.getElementById('sampleBtn').addEventListener('click', () => {
            const s = SAMPLES[sIdx++ % SAMPLES.length];
            s.v.forEach((v, i) => { const el = document.getElementById(`f${i}`); if (el) el.value = v });
            clearErr(); toast(s.label, 'info');
        });

        /* PREDICT */
        document.getElementById('predictBtn').addEventListener('click', async () => {
            clearErr();
            const vals = Array.from({ length: 8 }, (_, i) => document.getElementById(`f${i}`).value);
            if (!validate(vals)) return;
            setLoad(true);
            try {
                const res = await fetch(`${API}/predict`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ features: vals.map(Number), model_name: selModel }) });
                if (!res.ok) { const e = await res.json(); throw new Error(e.error || 'Server error') }
                renderResult(await res.json());
            } catch (e) { toast(e.message || 'Cannot reach Flask â€” run: python app.py') }
            finally { setLoad(false) }
        });

        function setLoad(on) {
            document.getElementById('predictBtn').disabled = on;
            document.getElementById('btnTxt').style.display = on ? 'none' : 'inline';
            document.getElementById('btnSpin').style.display = on ? 'inline-block' : 'none';
        }
        function clearErr() { document.querySelectorAll('.field input,.field select').forEach(e => e.classList.remove('err')); document.querySelectorAll('.emsg').forEach(e => e.remove()) }
        function showErr(i, msg) { const el = document.getElementById(`f${i}`); if (!el) return; el.classList.add('err'); const s = document.createElement('span'); s.className = 'emsg'; s.textContent = msg; el.parentElement.appendChild(s) }
        function validate(vals) { let ok = true; vals.forEach((v, i) => { if (v === '' || v === null) { showErr(i, 'Required'); ok = false } else if (isNaN(Number(v))) { showErr(i, 'Number required'); ok = false } }); return ok }

        function renderResult(data) {
            const s = data.survived === 1, cls = s ? 'survived' : 'perished', ico = s ? 'ðŸ›Ÿ' : 'ðŸŒŠ', col = s ? 'var(--teal2)' : 'var(--red2)', pct = data.probability;
            document.getElementById('resultArea').innerHTML = `
    <div class="rcard ${cls} rv">
      <div class="rglow"></div><div class="ch">Prediction</div>
      <div class="rico">${ico}</div>
      <div class="rlabel">${data.prediction}</div>
      <div class="rtags">
        <span class="rtag">Confidence: <strong style="color:${col}">${pct}%</strong></span>
        <span class="rtag">${data.model_used}</span>
      </div>
      <div class="ctrack"><div class="cfill" id="cfill" style="width:0%"></div></div>
    </div>`;
            setTimeout(() => { const f = document.getElementById('cfill'); if (f) f.style.width = pct + '%' }, 60);
        }

        async function loadMetrics() {
            try {
                const res = await fetch(`${API}/model-metrics`);
                mcache = await res.json();
                updateStats(selModel); renderAccChart(); renderROCAllChart(); renderFeatChart(); renderKnnChart();
            } catch { toast('Flask server not reachable â€” run: python app.py') }
        }
        function updateStats(k) {
            if (!mcache || !mcache[k]) return;
            const m = mcache[k];
            document.getElementById('sTrain').textContent = m.train_accuracy + '%';
            document.getElementById('sTest').textContent = m.test_accuracy + '%';
            document.getElementById('sAuc').textContent = m.roc_auc;
        }

        async function renderCM(key) {
            const area = document.getElementById('cmArea');
            try {
                const res = await fetch(`${API}/confusion-matrix/${key}`); const data = await res.json(); const cm = data.confusion_matrix;
                const cells = [
                    { v: cm[0][0], label: 'True Neg', bg: 'rgba(31,200,168,.14)', br: 'rgba(31,200,168,.3)' },
                    { v: cm[0][1], label: 'False Pos', bg: 'rgba(217,64,64,.14)', br: 'rgba(217,64,64,.3)' },
                    { v: cm[1][0], label: 'False Neg', bg: 'rgba(245,158,11,.14)', br: 'rgba(245,158,11,.3)' },
                    { v: cm[1][1], label: 'True Pos', bg: 'rgba(31,200,168,.14)', br: 'rgba(31,200,168,.3)' },
                ];
                area.innerHTML = `<div class="cmgrid"><div></div><div class="cmch">Pred: Did Not</div><div class="cmch">Pred: Survived</div>
      <div class="cmrh">Actual: Did Not</div>${[0, 1].map(i => `<div class="cmcell" style="background:${cells[i].bg};border:1px solid ${cells[i].br}"><span class="cmv">${cells[i].v}</span><span class="cml">${cells[i].label}</span></div>`).join('')}
      <div class="cmrh">Actual: Survived</div>${[2, 3].map(i => `<div class="cmcell" style="background:${cells[i].bg};border:1px solid ${cells[i].br}"><span class="cmv">${cells[i].v}</span><span class="cml">${cells[i].label}</span></div>`).join('')}</div>`;
            } catch { area.innerHTML = `<p style="color:var(--mt);font-style:italic">Could not load.</p>` }
        }

        async function renderROC(key) {
            try {
                const res = await fetch(`${API}/roc-data/${key}`); const data = await res.json();
                const step = Math.max(1, Math.floor(data.fpr.length / 80));
                const fpr = data.fpr.filter((_, i) => i % step === 0), tpr = data.tpr.filter((_, i) => i % step === 0);
                if (charts.roc) charts.roc.destroy();
                charts.roc = new Chart(document.getElementById('rocChart'), {
                    type: 'line',
                    data: {
                        labels: fpr.map(v => v.toFixed(3)), datasets: [
                            { label: `AUC=${data.auc}`, data: tpr, borderColor: '#c89020', backgroundColor: 'rgba(200,144,32,.07)', fill: true, tension: .32, pointRadius: 0, borderWidth: 2.4 },
                            { label: 'Random', data: fpr, borderColor: '#2a3d50', borderDash: [5, 4], pointRadius: 0, borderWidth: 1.4, fill: false }]
                    },
                    options: cOpts('FPR', 'TPR')
                });
            } catch { }
        }

        async function renderROCAllChart() {
            const cols = ['#c89020', '#1fc8a8', '#d94040'], keys = ['logistic', 'knn', 'decision_tree'], ds = [];
            for (let i = 0; i < keys.length; i++) { try { const r = await fetch(`${API}/roc-data/${keys[i]}`); const d = await r.json(); const step = Math.max(1, Math.floor(d.fpr.length / 60)); const fpr = d.fpr.filter((_, j) => j % step === 0); const tpr = d.tpr.filter((_, j) => j % step === 0); ds.push({ label: `${MODEL_LABELS[keys[i]].split(' ')[0]} (${d.auc})`, data: tpr, _fpr: fpr, borderColor: cols[i], pointRadius: 0, borderWidth: 2, fill: false, tension: .3 }) } catch { } }
            if (!ds.length) return;
            if (charts.rocAll) charts.rocAll.destroy();
            charts.rocAll = new Chart(document.getElementById('rocAllChart'), { type: 'line', data: { labels: ds[0]._fpr.map(v => v.toFixed(3)), datasets: ds }, options: cOpts('FPR', 'TPR') });
        }

        function renderAccChart() {
            if (!mcache) return;
            const labels = Object.keys(mcache).map(k => MODEL_LABELS[k].split(' ')[0]);
            const train = Object.values(mcache).map(m => m.train_accuracy), test = Object.values(mcache).map(m => m.test_accuracy);
            if (charts.acc) charts.acc.destroy();
            charts.acc = new Chart(document.getElementById('accChart'), {
                type: 'bar',
                data: {
                    labels, datasets: [
                        { label: 'Train %', data: train, backgroundColor: 'rgba(200,144,32,.5)', borderColor: '#c89020', borderWidth: 2, borderRadius: 6 },
                        { label: 'Test %', data: test, backgroundColor: 'rgba(31,200,168,.5)', borderColor: '#1fc8a8', borderWidth: 2, borderRadius: 6 }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: '#a0b5c5', font: { size: 11 } } } },
                    scales: { y: { min: 50, max: 100, ticks: { color: '#7d95ab' }, grid: { color: 'rgba(255,255,255,.04)' } }, x: { ticks: { color: '#a0b5c5' }, grid: { display: false } } }
                }
            });
        }

        async function renderFeatChart() {
            try {
                const res = await fetch(`${API}/feature-importance`); const data = await res.json();
                const FLABELS = { pclass: 'Class', sex: 'Sex', age: 'Age', sibsp: 'Siblings', parch: 'Parents', fare: 'Fare', embarked: 'Port', alone: 'Alone' };
                const pairs = data.features.map((f, i) => ({ f: FLABELS[f] || f, v: +(data.importances[i] * 100).toFixed(2) })).sort((a, b) => b.v - a.v);
                if (charts.feat) charts.feat.destroy();
                charts.feat = new Chart(document.getElementById('featChart'), {
                    type: 'bar',
                    data: { labels: pairs.map(p => p.f), datasets: [{ label: 'Importance', data: pairs.map(p => p.v), backgroundColor: pairs.map((_, i) => `hsla(${35 + i * 25},70%,${56 - i * 4}%,.7)`), borderColor: pairs.map((_, i) => `hsla(${35 + i * 25},70%,${66 - i * 4}%,1)`), borderWidth: 2, borderRadius: 5 }] },
                    options: {
                        indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } },
                        scales: { x: { ticks: { color: '#7d95ab' }, grid: { color: 'rgba(255,255,255,.04)' } }, y: { ticks: { color: '#a0b5c5', font: { size: 11 } }, grid: { display: false } } }
                    }
                });
            } catch { }
        }

        async function renderKnnChart() {
            try {
                const res = await fetch(`${API}/knn-k-scores`); const data = await res.json();
                const bestK = data.scores.indexOf(Math.max(...data.scores));
                if (charts.knn) charts.knn.destroy();
                charts.knn = new Chart(document.getElementById('knnChart'), {
                    type: 'line',
                    data: { labels: data.k_range, datasets: [{ label: 'Accuracy', data: data.scores.map(v => +(v * 100).toFixed(2)), borderColor: '#1fc8a8', backgroundColor: 'rgba(31,200,168,.07)', fill: true, tension: .32, borderWidth: 2.4, pointRadius: 5, pointBackgroundColor: data.scores.map((_, i) => i === bestK ? '#e8b040' : '#1fc8a8'), pointBorderColor: '#07090d' }] },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: { legend: { labels: { color: '#a0b5c5' } }, tooltip: { callbacks: { afterLabel: c => c.dataIndex === bestK ? ' â† Best K' : '' } } },
                        scales: {
                            x: { title: { display: true, text: 'K Value', color: '#7d95ab' }, ticks: { color: '#7d95ab' }, grid: { color: 'rgba(255,255,255,.04)' } },
                            y: { title: { display: true, text: 'Accuracy (%)', color: '#7d95ab' }, ticks: { color: '#7d95ab' }, grid: { color: 'rgba(255,255,255,.04)' } }
                        }
                    }
                });
            } catch { }
        }

        function cOpts(xl, yl) { return { responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: '#a0b5c5', font: { size: 11 } } } }, scales: { x: { title: { display: true, text: xl, color: '#7d95ab' }, ticks: { color: '#7d95ab', maxTicksLimit: 5 }, grid: { color: 'rgba(255,255,255,.04)' } }, y: { title: { display: true, text: yl, color: '#7d95ab' }, ticks: { color: '#7d95ab' }, grid: { color: 'rgba(255,255,255,.04)' } } } }; }

        let tTimer;
        function toast(msg, type = 'err') { const el = document.getElementById('toast'); el.className = `toast ${type}`; el.textContent = (type === 'err' ? 'âš  ' : '') + msg; el.style.display = 'block'; clearTimeout(tTimer); tTimer = setTimeout(() => el.style.display = 'none', 4500) }

        loadMetrics(); renderCM('logistic'); renderROC('logistic');
    </script>
</body>

</html>